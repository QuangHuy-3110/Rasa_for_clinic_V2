version: "3.1"

stories:
  # ================================ Đề xuất bác sĩ =============================================================
  - story: happy path doctor recommendation
    steps:
      - intent: greet
      - action: utter_greet
      - intent: request_doctor
      - action: action_set_current_task
      - slot_was_set:
          - current_task: request_doctor

      - action: recommend_doctor_form
      - active_loop: recommend_doctor_form
      # - action: utter_ask_symptoms
      - intent: provide_medical_info
      - slot_was_set:
          - symptoms: [đau đầu, sốt]
      - active_loop: null
      - action: action_recommend_doctor
      # - action: utter_recommend_doctor
    #   - intent: affirm
    #   - action: utter_confirm

  - story: greet without doctor
    steps:
      - intent: greet
      - action: utter_greet
      - intent: goodbye
      - action: utter_goodbye
  # ================================ Đề xuất bác sĩ + đặt lịch =============================================================
  - story: Recomment doctor with book appointment
    steps:
      - intent: greet
      - action: utter_greet
      - intent: request_doctor
      - action: action_set_current_task
      - slot_was_set:
          - current_task: request_doctor

      - action: recommend_doctor_form
      - active_loop: recommend_doctor_form
      # - action: utter_ask_symptoms
      - intent: provide_medical_info
      - slot_was_set:
          - symptoms: [đau đầu, sốt]
      - active_loop: null
      - action: action_recommend_doctor
      # - action: utter_recommend_doctor
      - intent: book_with_doctor
      - slot_was_set:
          - doctor_id: "BS001"
      - action: action_book_with_doctor
      - action: action_set_current_task
      - slot_was_set:
          - current_task: book_appointment
      - action: book_appointment_form
      - active_loop: book_appointment_form
    #   - intent: affirm
    #   - action: utter_confirm
  # ================================ Đặt lịch khám =============================================================
  - story: happy path book appointment
    steps:
      - intent: greet
      - action: utter_greet
      - intent: book_appointment
      - action: action_set_current_task
      - slot_was_set:
          - current_task: book_appointment
      - action: book_appointment_form
      - active_loop: book_appointment_form
      # - action: utter_ask_specialty
      - intent: provide_specialty
      - slot_was_set:
          - specialty: nhi
      # - action: utter_ask_doctor_name
      - intent: choose_doctor_name
      - slot_was_set:
          - doctor_name: bác sĩ Anh
      # - action: utter_ask_date
      - intent: provide_date
      # - action: utter_ask_appointment_time
      - intent: provide_time
      - slot_was_set:
          - appointment_time: 3 giờ chiều mai
      # - action: utter_ask_decription
      - intent: provide_decription
      - slot_was_set:
          - decription: khám bệnh cho con tôi
      - active_loop: null
      - action: action_book_appointment
    #   - intent: affirm
    #   - action: utter_confirm

  # ================================ Tra cứu thông tin bác sĩ =============================================================
  - story: happy path search doctor info
    steps:
      - intent: greet
      - action: utter_greet
      - intent: search_doctor_info
      #   - action: action_set_current_task
      #   - slot_was_set:
      #       - current_task: search_doctor_info
      - action: utter_doctor_info
      - intent: choose_doctor_name
      - slot_was_set:
          - doctor_name: bác sĩ Anh
      - action: action_search_doctor
    #   - intent: affirm
    #   - action: utter_confirm

    # ================================ Giải thích chuyên khoa =============================================================
  - story: happy path explain specialty 1
    steps:
      - intent: greet
      - action: utter_greet
      - intent: explain_specialty
      - slot_was_set:
          - specialty: nhi
      - action: action_search_specialty
    #   - intent: affirm
    #   - action: utter_confirm
    # ================================ Hủy lịch hẹn =============================================================
  - story: happy path cancel appointment
    steps:
      - intent: greet
      - action: utter_greet
      - intent: cancel_appointment
      - action: action_set_current_task
      - slot_was_set:
          - current_task: cancel_appointment
      - action: action_cancel_appointment
      - intent: select_appointment
      - slot_was_set:
          - selected_appointment_id: "LH001"
      - action: action_confirm_cancel
      - intent: affirm
      - action: action_perform_cancel
      - action: utter_appointment_cancelled
